<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[function onLoadFunction() {
    gel('stream_right').remove(0);
    gel('tt_right').remove(0);
    var x = document.getElementsByClassName("slushselect form-control");
    var i;

    for (i = 0; i < x.length; i++) {
        x[i].style.height = "190px";
    }

}

function loadResponse(response) {
    //Process the return XML document and add groups to the left select
    var xml = response.responseXML;

    var e = xml.documentElement;

    var items = xml.getElementsByTagName("item");
    if (items.length == 0)
        return;

    //Loop through item elements and add each item to left slushbucket
    for (var i = 0; i < items.length; i++) {
        var item = items[i];
        tt.addLeftChoice(item.getAttribute('value'), item.getAttribute('text'));
    }
}

function addStreamMultiple() {
    var streamValues = stream.getValues(stream.getRightSelect());
    var ga = new GlideAjax("x_snc_coe.OneStopStreamsModelAJAX");
    ga.addParam("sysparm_name", "restrictAdditionOfDuplicateStream");
    ga.addParam("sysparm_request_id", gel('request').value);
    ga.addParam("sysparm_streams", streamValues.toString());
    ga.getXMLAnswer(checkAnswer);

    function checkAnswer(response) {
        var answer = response;
        g_form.save();
        GlideDialogWindow.get().destroy();
    }
}]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_snc_coe_add_stream.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">

<script>
	addLoadEvent( function() {
 		onLoadFunction();
	});
</script>
	
<input type="hidden" name="flag" id="request" value="${sysparm_sysID}"/>
	<input type="hidden" name="flag" id="table" value="${sysparm_table}"/>
<g:evaluate object="true"  var="jvar_gr">
	var jobs = new GlideRecord("x_snc_coe_streams_model");
	jobs.addQuery('table','${sysparm_table}');
	jobs.query();
	jobs;
 </g:evaluate>
<j:while test="${jvar_gr.next()}">
	<input type="hidden" name="flag" id="user" value="${jvar_gr.getValue('template_names')}"/>
	<g:evaluate jelly="true"> 
		
	var temp = "${jvar_gr.getValue('template_names')}";
	var Streams = new GlideRecord('sys_template');
	Streams.addEncodedQuery("sys_idIN"+temp);
	Streams.orderBy('name');
	Streams.query();
	Streams;
		
</g:evaluate>
	
<div id="page1">
	<g:ui_slushbucket  name="stream" style="height:100px" left_header="Available" right_header="Selected">
   		<j:while test="${Streams.next()}">
   			<option value="${Streams.name}" title="${Streams.sys_id}"> ${Streams.name}</option>
				
   		</j:while>
	</g:ui_slushbucket>
	<span id="msg" style="align:right; color:red; display:none">Please select at least one Process Stream</span>
	<table width="100%">
		<tr id="dialog_buttons">
			<td colspan="2" align="right" style="padding-right:85px">
				<g:dialog_buttons_ok_cancel ok="addStreamMultiple()" ok_type="button" cancel_type="button" />
			</td>
        </tr>
	</table>
</div>
	</j:while>
</j:jelly>
	]]></html>
        <name>add_stream</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>piyushkumar1@kpmg.com</sys_created_by>
        <sys_created_on>2021-03-19 07:49:37</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>be8522e41bc3a850a63cf9f5464bcbef</sys_id>
        <sys_mod_count>69</sys_mod_count>
        <sys_name>add_stream</sys_name>
        <sys_package display_value="Audit CoE" source="x_snc_coe">60a5ae6b1b7850103fa411fc2d4bcbe5</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Audit CoE">60a5ae6b1b7850103fa411fc2d4bcbe5</sys_scope>
        <sys_update_name>sys_ui_page_be8522e41bc3a850a63cf9f5464bcbef</sys_update_name>
        <sys_updated_by>piyushkumar1@kpmg.com</sys_updated_by>
        <sys_updated_on>2021-03-24 17:50:08</sys_updated_on>
    </sys_ui_page>
</record_update>
